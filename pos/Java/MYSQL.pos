{"diagram":{"image":{"height":200,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","width":200,"y":0,"x":0},"elements":{"id":"root","title":"MYSQL","leftChildren":[],"structure":"mind_free","root":true,"theme":"colorLines","children":[{"id":"af8c22991bf4","title":"范式","parent":"root","children":[{"id":"7ffb4ea2fced","title":"第一范式","children":[{"id":"5fb26b7daa47","title":"强调列的原子性","children":[],"parent":"7ffb4ea2fced"}],"parent":"af8c22991bf4","collapsed":false},{"id":"fcf576601379","title":"第二范式","children":[{"id":"f8196caa7379","title":"满足第一范式，但必须有主键，其他属性都依赖于主键","children":[],"parent":"fcf576601379"}],"parent":"af8c22991bf4","collapsed":false},{"id":"98e110c7af87","title":"第三范式","children":[{"id":"7c675742b18c","title":"满足一，二范式，任何非主键字段不能依赖于其他非主键字段","children":[],"parent":"98e110c7af87"}],"parent":"af8c22991bf4","collapsed":false},{"id":"65d6422dad6f","title":"　反范式","children":[{"id":"decd7db61219","title":"为了获得最大的效率，可以违反二，三范式","parent":"65d6422dad6f","children":[]}],"parent":"af8c22991bf4","collapsed":false}]},{"id":"6df6d375bf22","title":"事务属性","parent":"root","children":[{"id":"e318cd793375","title":"原子性","children":[{"id":"849eeeceb221","title":"一个事务要么执行了，要么没有执行，没有中间状态，通过ｃｏｍｍｉｔ和ｒｏｌｌｂａｃｋ来操作","parent":"e318cd793375","children":[]}],"parent":"6df6d375bf22","collapsed":false},{"id":"1a69b09dd3f3","title":"一致性","children":[{"id":"c77a0673caa6","title":"数据库内所有数据在操作前后是一致的","children":[],"parent":"1a69b09dd3f3"}],"parent":"6df6d375bf22","collapsed":false},{"id":"b0e808d85215","title":"隔离性","children":[{"id":"28aa912e76e2","title":"隔离级别","children":[{"id":"cd140e16576a","title":"提交读","children":[{"id":"8e49a71acf62","title":"可以读取其他事务未提交的数据，可能导致幻读，不可重复读，脏读","parent":"cd140e16576a","children":[]}],"parent":"28aa912e76e2"},{"id":"bfcac79522d4","title":"未提交读","children":[{"id":"d344f9331652","title":"不能读取其他事务未提交的数据，但可以读取其他事务已提交的数据，会导致幻读，不可重复读","parent":"bfcac79522d4","children":[]}],"parent":"28aa912e76e2"},{"id":"9c87bc117505","title":"　可重复读","children":[{"id":"a8296486fd49","title":"默认级别，不能读取其他事务未提交的数据，只能读取其他事务已提交的新插入的数据，会导致幻读","children":[],"parent":"9c87bc117505"}],"parent":"28aa912e76e2"},{"id":"174e00433ec1","title":"串行化","children":[{"id":"a4b88fa9c5c2","title":"对事务读，写都加锁，使事务完全串行化","children":[],"parent":"174e00433ec1"}],"parent":"28aa912e76e2"}],"parent":"b0e808d85215"}],"parent":"6df6d375bf22","collapsed":false},{"id":"e06bc74a1d50","title":"持久性","children":[{"id":"02da6815225a","title":"一个事务一旦执行成功后，就会一直保存","children":[],"parent":"e06bc74a1d50"}],"parent":"6df6d375bf22","collapsed":false}]},{"id":"f80da13f99fa","title":"底层原理","parent":"root","children":[{"id":"74dfacfb448d","title":"B+树","parent":"f80da13f99fa","children":[{"id":"fb613d1027b5","title":"只有一个根节点","children":[],"parent":"74dfacfb448d"},{"id":"b284c83f0426","title":"一个m阶B+树中分支节点的个数是m/2-m","children":[],"parent":"74dfacfb448d"},{"id":"e71bf557abec","title":"非叶子节点存储的是键，叶子节点存储的是key值，而且每个叶子节点通过一个链表相连，便于访问","parent":"74dfacfb448d","children":[]},{"id":"30d5acf7fbb2","title":"分支节点的键值数量等于其子分支数量减1，一次递增","parent":"74dfacfb448d","children":[]},{"id":"1fa78c59c6a1","title":"每个叶子节点对应内存的一个页表，可以减少IO操作","children":[],"parent":"74dfacfb448d"}]}]},{"id":"c36cab834cd3","title":"常用语句","parent":"root","children":[{"id":"04ef2f0e2bf6","title":"数据定义语言（DDL）","children":[{"id":"4a65b478e165","title":"创建","parent":"04ef2f0e2bf6","children":[{"id":"25570b134a8f","title":"create database;<br>create table;<br>create index;","parent":"4a65b478e165","children":[]}]},{"id":"ea2d8ed345e8","title":"更改","parent":"04ef2f0e2bf6","children":[{"id":"43044b9e09ec","title":"alter table:<br>...","parent":"ea2d8ed345e8","children":[]}]},{"id":"a32f12d8ff72","title":"删除","parent":"04ef2f0e2bf6","children":[{"id":"41bf91ad52a7","title":"drop index;<br>...","parent":"a32f12d8ff72","children":[]},{"id":"bca8ca0575ad","title":"仅删除表内的数据，而不删除表自身：truncate table table_name","children":[],"parent":"a32f12d8ff72"}]}],"parent":"c36cab834cd3"},{"id":"1cfced616c46","title":"数据操作语言（DML）","children":[{"id":"2eb7a39f63c5","title":"搜索","children":[{"id":"b43fd0a42e88","title":"select id from table where id in(0,100) order by id DESC","children":[],"parent":"2eb7a39f63c5"},{"id":"c9ebbd5d54b9","title":"去重：select distince 列名 from 表名","children":[],"parent":"2eb7a39f63c5"},{"id":"96bb0cd0afde","title":"执行顺序","children":[{"id":"98b7ad425d15","title":"from-where-group by-having-select(子查询)-order by","children":[],"parent":"96bb0cd0afde"}],"parent":"2eb7a39f63c5"}],"parent":"1cfced616c46"},{"id":"bd245f8a6319","title":"插入","children":[{"id":"e56450743f0d","title":"insert into table values('','')","children":[],"parent":"bd245f8a6319"}],"parent":"1cfced616c46"},{"id":"1c5cb46db935","title":"更新","children":[{"id":"850b60b8b250","title":"update table set colName=newValue where ...","children":[],"parent":"1c5cb46db935"}],"parent":"1cfced616c46"},{"id":"8e9e691d9c5f","title":"删除","children":[{"id":"d89455d930ec","title":"delete from table where ...","parent":"8e9e691d9c5f","children":[]}],"parent":"1cfced616c46"}],"parent":"c36cab834cd3"},{"id":"5a5ed9173cc5","title":"高级","parent":"c36cab834cd3","children":[{"id":"624dee1e7ece","title":"限制输出的行数","parent":"5a5ed9173cc5","children":[{"id":"07c3e3b9fe8c","title":"select * from&nbsp; table limit 5","parent":"624dee1e7ece","children":[]}]},{"id":"f32270898f99","title":"通配符like","parent":"5a5ed9173cc5","children":[]},{"id":"090a8f7c445d","title":"连接","parent":"5a5ed9173cc5","children":[{"id":"4392c9625fb5","title":"内连接","parent":"090a8f7c445d","children":[]},{"id":"dab85b55616b","title":"外连接","parent":"090a8f7c445d","children":[{"id":"dcc8a895560b","title":"左外连接","parent":"dab85b55616b","children":[]},{"id":"cefa53a9782a","title":"右外连接","parent":"dab85b55616b","children":[]}]}]}]},{"id":"c233efb78c7a","title":"索引","parent":"c36cab834cd3","children":[{"id":"a1e0118d9dd1","title":"分类","children":[{"id":"07e030a8a6a6","title":"主键索引","parent":"a1e0118d9dd1","children":[]},{"id":"d454c250d1e4","title":"非空索引","children":[],"parent":"a1e0118d9dd1"},{"id":"b36ad4774eed","title":"组合索引","parent":"a1e0118d9dd1","children":[]},{"id":"b7f8516c7154","title":"一般索引","children":[],"parent":"a1e0118d9dd1"},{"id":"c1b5bdb75fbc","title":"全文索引","parent":"a1e0118d9dd1","children":[]}],"parent":"c233efb78c7a"},{"id":"e9d1c74cae8c","title":"创建方式","children":[{"id":"4bb6f3f34997","title":"直接创建：create index index_name on table(column_name)","children":[],"parent":"e9d1c74cae8c"},{"id":"0c59f24ad098","title":"创建表的时候指定：create table 'table' add index index_name()","children":[],"parent":"e9d1c74cae8c"},{"id":"a706779cb8a4","title":"修改表结构时候指定：alter table table_name add index idex_name()","children":[],"parent":"e9d1c74cae8c"}],"parent":"c233efb78c7a"},{"id":"c8dadc41c6a6","title":"删除：alter table table_name drop index index_name","parent":"c233efb78c7a","children":[]}]}]},{"id":"642baa2122ad","title":"MySQL锁","children":[{"id":"275d770820c9","title":"乐观","children":[{"id":"4964f620ad07","title":"时间戳","children":[],"parent":"275d770820c9"},{"id":"627bdc2c2be8","title":"基于验证","children":[],"parent":"275d770820c9","collapsed":false}],"parent":"642baa2122ad"},{"id":"cccd97af03a5","title":"悲观","children":[{"id":"012d096ff088","title":"读写锁","children":[{"id":"3e5c351f7f7d","title":"读不加锁，写加锁","parent":"012d096ff088","children":[]}],"parent":"cccd97af03a5"},{"id":"7bf35b276eb7","title":"两阶段锁","children":[{"id":"b602f3715298","title":"只在commit和rollback的情况下解锁，其他情况下加锁。加锁和解锁分离","children":[],"parent":"7bf35b276eb7"}],"parent":"cccd97af03a5"}],"parent":"642baa2122ad"},{"id":"abe49fa3dd83","title":"MVCC","children":[{"id":"5c20fec68d7a","title":"在表里面添加一个ｖｅｒｓｉｏｎ字段，每次修改成功值加１，每次修改的时候对比以下","children":[],"parent":"abe49fa3dd83"}],"parent":"642baa2122ad"}],"parent":"root","collapsed":false},{"id":"c723df9a07b7","title":"引擎","parent":"root","children":[{"id":"d39692a1431c","title":"MyisAm","parent":"c723df9a07b7","children":[{"id":"f99ccf16acba","title":"不支持事务，是非聚族索引，不支持外键，但支持全文搜索，索引保存的是地址，会保存行值","children":[],"parent":"d39692a1431c"}]},{"id":"ab7d4ea6806d","title":"InnoDB","parent":"c723df9a07b7","children":[{"id":"400623775a1d","title":"支持事务，聚族索引，索引保存的是具体的值，支持主键，不支持全文搜索，提供了行级锁","children":[],"parent":"ab7d4ea6806d"}]}],"collapsed":false},{"id":"57a96118dc99","title":"优化","children":[{"id":"e63823bb9330","title":"数据类型优化","children":[{"id":"0de1c98e5bdb","title":"小而简单，不要为ｎｕｌｌ","children":[{"id":"f6b846ba3d04","title":"ｃｈａｒ是定长的，ｖａｒｃｈａｒ是可变的","children":[],"parent":"0de1c98e5bdb"},{"id":"078e841abdbb","title":"ｉｎｔ（１）和ｉｎｔ（２０）占用同样大小的内存，只是显示的位数不同","children":[],"parent":"0de1c98e5bdb"}],"parent":"e63823bb9330"}],"parent":"57a96118dc99"},{"id":"0b2634e98956","title":"创建高性能索引","children":[],"parent":"57a96118dc99"},{"id":"73df585b38ed","title":"分库分表","children":[],"parent":"57a96118dc99"}],"parent":"root","collapsed":false},{"id":"df6dd72b51ba","title":"日志（InnoDB）","parent":"root","children":[{"id":"6d5ba0bc195b","title":"Undo Log","parent":"df6dd72b51ba","children":[{"id":"3b56b0012329","title":"为了保证数据的原子性，每次进行操作前，会将所有数据保存在Undo Log中，然后再修改，出错了可以恢复","parent":"6d5ba0bc195b","children":[]}]},{"id":"aa5a2323e4f7","title":"Redo Log","parent":"df6dd72b51ba","children":[{"id":"68f912f097a9","title":"只记录新数据的备份","parent":"aa5a2323e4f7","children":[]}]},{"id":"d45b68fb4db6","title":"主从复制","parent":"df6dd72b51ba","children":[{"id":"c4086f52b2d6","title":"binLog","parent":"d45b68fb4db6","children":[{"id":"ac006265e3cd","title":"记录用户对数据库更新的SQL语句","parent":"c4086f52b2d6","children":[]}]},{"id":"784ffc840670","title":"relayLog","parent":"d45b68fb4db6","children":[{"id":"3b862b8cc73a","title":"&nbsp;为了避免单点宕机和丢失数据，主节点将操作写入binLog日志，通过IO流，传入到从节点的relayLog中","parent":"784ffc840670","children":[]}]}]},{"id":"cb9603ccd28b","title":"慢查询日志explain","parent":"df6dd72b51ba","children":[]}],"collapsed":false}]}},"meta":{"id":"5c9596f2e4b0ed6b430c02d4","member":"5c94c2a6e4b02ce2e8992267","exportTime":"2019-12-03 20:04:01","diagramInfo":{"category":"mind_free","title":"MYSQL","created":"2019-03-23 10:16:18","creator":"5c94c2a6e4b02ce2e8992267","modified":"2019-03-24 10:22:01"},"type":"ProcessOn Schema File","version":"1.0"}}